server {
        listen       80;
        # server_name  uat.seedslabs.io;
        return 301 https://$http_host$request_uri;
}
server {
        listen       443 ssl;
        # server_name  uat.seedslabs.io;
        # ssl_certificate /opt/ssl-acme/uat.seedslabs.io_ecc/fullchain.cer;
        # ssl_certificate_key /opt/ssl-acme/uat.seedslabs.io_ecc/uat.seedslabs.io.key;
        location / {
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass   http://seeds-web:8001/;
        add_header Access-Control-Allow-Origin https://uat.seedslabs.io;
        # add_header Access-Control $access_control_headers;
        add_header Access-Control-Allow-Methods $access_control_methods;
        add_header Access-Control-Allow-Headers $access_control_headers;
        if ($request_method = 'OPTIONS') {
                return 204;
        }
        }
        location ~^/admin/(.*) {
        proxy_redirect off;
        proxy_set_header Host $host:$server_port; #添加:$server_port
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://seeds-gateway:9999/admin/$1?$args;
        # add_header Access-Control $access_control_headers;
        add_header Access-Control-Allow-Methods $access_control_methods;
        add_header Access-Control-Allow-Headers $access_control_headers;

        if ($request_method = 'OPTIONS') {
                return 204;
        }
}
      location ~^/api/v1/(.*) {
        proxy_redirect off;
        proxy_set_header Host $host:$server_port; #添加:$server_port
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://seeds-gateway:9999/$1?$args;
#       add_header Access-Control $access_control_headers;
        add_header Access-Control-Allow-Methods $access_control_methods;
        add_header Access-Control-Allow-Headers $access_control_headers;

        if ($request_method = 'OPTIONS') {
                return 204;
        }
}
}